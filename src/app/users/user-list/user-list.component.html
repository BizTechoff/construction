<div class="users-container">
  <div class="header">
    <h2>ניהול משתמשים</h2>
    <div class="live-mode-toggle" (click)="toggleQueryMode()">
      <span class="toggle-label">Live</span>
      <div class="toggle-switch" [class.active]="useLiveQuery">
        <div class="toggle-slider"></div>
      </div>
    </div>
  </div>

  <app-base-table
    [data]="users"
    [entityType]="userEntity"
    [loading]="loading"
    [totalRecords]="totalRecords"
    [currentPage]="currentPage"
    [pageSize]="pageSize"
    [sortable]="true"
    [showFilter]="true"
    [showPagination]="true"
    [showActions]="isAdmin()"
    [showAdd]="isAdmin()"
    [readonly]="!isAdmin()"
    [addButtonText]="'הוסף משתמש'"
    (onSort)="onSort($event)"
    (onFilter)="onFilter($event)"
    (onPageChange)="onPageChange($event)"
    (onRefresh)="onRefresh()"
    (onAdd)="addUser()"
    (onEdit)="editUser($event)"
    (onDelete)="deleteUser($event)"
    [hiddenColumns]="['id', 'password']"
  >
    <!-- Custom column for admin status -->
    <ng-template appTableColumn="admin" header="מנהל" let-row>
      <span [style.color]="row.admin ? 'green' : 'gray'">
        {{ row.admin ? '✓' : '✗' }}
      </span>
    </ng-template>

    <!-- Custom column for manager status -->
    <ng-template appTableColumn="manager" header="מנהל" let-row>
      <span [style.color]="row.manager ? 'blue' : 'gray'">
        {{ row.manager ? '✓' : '✗' }}
      </span>
    </ng-template>

    <!-- Custom column for disabled status -->
    <ng-template appTableColumn="disabled" header="מושבת" let-row>
      <span [style.color]="row.disabled ? 'red' : 'green'">
        {{ row.disabled ? 'מושבת' : 'פעיל' }}
      </span>
    </ng-template>

    <!-- Custom column for disabled status -->
    <ng-template appTableColumn="createDate" header="תאריך יצירה" let-row>
      <span>
        {{ row.createDate | date: 'HH:mm dd/MM/yyyy' }}
      </span>
    </ng-template>
    
  </app-base-table>
</div>
